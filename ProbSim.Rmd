---
title: "Probability Exercises in R"
output: html_notebook
---

The idea of random sampling is very useful in statistics and probability.
The function `sample` will randomly draw samples from whatever object `x` you specify (ie, a list or a column of a dataframe)  
The argument `replacement = TRUE` means it can draw the same number more than once!
The following code randomly selects 5 numbers between 1 and 10:  
To run the code, press the 'play' button in the top right corner of the code chunk

```{r}
randomnum = sample(x = 1:10, size=5, replace=TRUE)
print(randomnum)
print(sum(randomnum))
```

Run this code chunk a few more times, and note how different the output can be.  
- Did you observe any numbers duplicated in a sample?  
- How different were the sums of the samples?  
- What was the approximate average of the sum?  
  
    
Let's simulate rolling two dice! (the number of dice is specified by the `size` argument)
```{r}
dice.roll <- sample(1:6, size = 2, replace = TRUE)
dice.roll
```
  
Let's say we wanted to know the average sum of rolling two dice, how could we go about that?  
The following code specifies a simple function to return the sum of rolling two dice:  
```{r}
two.dice <- function(){
  dice <- sample(1:6, size = 2, replace = TRUE)
  return(sum(dice))
}
```
This is how you call the function:  (be sure to run the above code block first to 'source' the function, ie, store it in your environment)
```{r}
two.dice()
```
Try running this code chunk a few times for yourself to observe the variation.  
  
Knowing what you know about the set of possible outcomes, what do you predict the mean sum of two dice rolls will be??  

#################################################  
...................thinking......................  
#################################################  

Well, the outcomes range from 2 {1,1} to 12 {6,6}, so 11 possible values, the middle of that range being 7 (with 5 values on either side).  

Now, to test our theory:  

What if you wanted to run the simulation MANY times AND keep track of the results?!  That is where programming comes in handy!  The `replicate` function will repeatedly call another function.  You can save the output to a variable (a list of sums).    
```{r}
# set.seed(1) 
sim10<-replicate(n = 10, expr = two.dice())
sim10 #remember, the value returned by the function is the sum of two dice values
```
This replicates the rolling of two dice 10 times, and records the sum of each role in the variable `sim10`.  
Note that the `set.seed()` function is a way for others to reproduce your work.  By setting the seed to a fixed number, it means that the "randomness" generated by R each time will be the same (so its not truly random - its termed 'pseudo-random'). But its good practice to set it each time you call a function that utilizes random number generation in R.     
  
Now, lets take the mean of this sample distribution  
```{r}
mean(sim10)
```
7.7?! Hmmmm, that seems a little high...  
  
What if we tried 100 rolls!!  
```{r}
set.seed(123)
sim100<-replicate(n = 100, expr = two.dice())
head(sim100, 10)
```
The `head()` function just shows us a peek at the first few values.  The second argument to head specifies the number of values you want to see! (the default is 6)  Now, let's see if the mean changes with more simulations. 
```{r}
mean(sim100)
```
That's closer to what we expect!  What if we want to look at the distribution of values?  One way to do that is by creating a `table`
```{r}
table(sim100)
```
The first row are the sums of the two dice, the second row is the frequency they occur.  
Maybe this would be a little easier to read if it showed the percentages of each roll.
```{r}
table(sim100)/length(sim100)
```
Here we can see that 20% of the 100 rolls had a sum of 7, while only 2% were 2.  
Let's take a look at a histogram:  
```{r}
plot(table(sim100), xlab = 'Sum', ylab = 'Frequency', main = '100 Rolls of 2 Fair Dice')
```
Now, that is cool!  We can immediately see that 7 is much more frequent than other numbers.  However, we can also see that there is some interesting variability!  For example, there are more 12s than 11s.  



Now let's try 10,000 dice rolls!!! Whoaaa
```{r}
set.seed(7)
sim10k<-replicate(n = 10000, expr = two.dice())
mean(sim10k)
```
It seems to be converging on 7!!  
  
Now its your turn:

First, take a look using the table function:
```{r}
###################################
# your code here, copy from above and edit the data argument

table(sim10k)

###################################
```


Now create the histogram from the table using the `plot` function
```{r}
###################################
# your code here, copy from above and edit the data argument
plot(table(sim10k), xlab = 'Sum', ylab = 'Frequency', main = '10k Rolls of 2 Fair Dice')


###################################
```

Good job!! Hopefully you can see that the more times the simulation is run, the closer it gets to the theoretical distribution!!  The Law of Large Numbers in action!!!!


  
Supplement: 
How is the theoretical distribution created?  Well, we know there are 36 possible outcomes
[![Two Dice](https://math.illinoisstate.edu/day/courses/old/312/session2101.gif)](https://math.illinoisstate.edu/day/courses/old/312/session2101.gif)  
  
Image source:  https://math.illinoisstate.edu/day/courses/old/312/session2101.gif
  
  
But a differing number of ways to get each sum.  Here is a (low-tech) histogram showing each possible die roll, and their corresponding sum.  The odds of each individual combination are 1/36!  
                                            odds:  
2:  {1,1}                                   1/36 =      = 0.0277  
3:  {1,2} {2,1}                             2/36 = 1/18 = 0.0555  
4:  {1,3} {2,2} {3,1}                       3/36 = 1/12 = 0.0833  
5:  {1,4} {2,3} {3,2} {4,1}                 4/36 = 1/9  = 0.1111  
6:  {1,5} {2,4} {3,3} {4,2} {5,1}           5/36 =      = 0.1388  
7:  {1,6} {2,5} {3,4} {4,3} {5,2} {6,1}     6/36 = 1/6  = 0.1666  
8:  {2,6} {3,5} {4,4} {5,3} {6,2}           5/36 =      = 0.1388  
9:  {3,6} {4,5} {5,4} {6,3}                 4/36 = 1/9  = 0.1111  
10: {4,6} {5,5} {6,4}                       3/36 = 1/12 = 0.0833  
11: {5,6} {6,5}                             2/36 = 1/18 = 0.0555  
12: {6,6}                                   1/36 =      = 0.0277  
  
Bonus Question:  
What are the odds of the sum being less than 10??  
(remember Complement!)  
  
A:  1-(5/36) = 1-0.1388 (or 31/36) = 0.8611  
